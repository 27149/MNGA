syntax = "proto3";

message Topic {
  string id = 1;
  string subject = 2;
  string author_id = 3;
  string author_name = 4;
  uint64 post_date = 5;
  uint64 last_post_date = 6;
  uint32 replies_num = 7;
}

message User {
  string id = 1;
  string name = 2;
  string avatar_url = 3;
  uint64 reg_date = 4;
  uint32 post_num = 5;
}

message Reply {
  string pid = 6;
  uint32 floor = 1;
  string author_id = 2;
  ReplyContent content = 3;
  uint64 post_date = 4;
  uint32 score = 5;
}

message Subforum {
  string id = 1;
  string name = 2;
  string description = 3;
  string filter_id = 7;
  uint64 attributes = 4;
  bool filterable = 5;
  bool selected = 6;
}

message Category {
  string id = 1;
  string name = 2;
  repeated Forum forums = 3;
}

message Forum {
  string id = 1;
  string name = 2;
  string info = 3;
  string icon_url = 4;
  string fid = 5;
  optional string stid = 6;
}

message Span {
  message Plain { string text = 1; }
  message BreakLine {}
  message Sticker { string name = 1; }
  message Tagged {
    string tag = 1;
    repeated string attributes = 2;
    repeated Span spans = 3;
  }

  oneof value {
    Plain plain = 1;
    BreakLine break_line = 2;
    Sticker sticker = 3;
    Tagged tagged = 4;
  }
}

message ReplyContent {
  repeated Span spans = 1;
  string raw = 2;
}

message Configuration { string document_dir_path = 1; }

message AuthInfo {
  string uid = 1;
  string token = 2;
}
